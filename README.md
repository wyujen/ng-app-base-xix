# ng-app-base-xix

Angular Application Base â€” **XIX Generation**

`ng-app-base-xix` æ˜¯ä¸€å€‹ **ä»¥ Angular Standalone æ¶æ§‹ç‚ºæ ¸å¿ƒ**ã€  
å°ˆç‚º **å¯è¤‡è£½ã€å¯ç¶­è­·ã€å¯æ¼”é€²** çš„å‰ç«¯å°ˆæ¡ˆæ‰€è¨­è¨ˆçš„ **æ‡‰ç”¨ç¨‹å¼åœ°åŸºï¼ˆApplication Baseï¼‰**ã€‚

æ­¤å°ˆæ¡ˆ**ä¸æ˜¯ç‰¹å®šæ¥­å‹™ç³»çµ±**ï¼Œè€Œæ˜¯ç”¨ä¾†ä½œç‚ºï¼š

- æ–° Angular å°ˆæ¡ˆçš„èµ·å§‹æ¨¡æ¿
- å…§éƒ¨ç³»çµ±çš„å‰ç«¯æ¨™æº–åœ°åŸº
- é•·æœŸå¯å‡ç´šçš„å·¥ç¨‹åŸºç¤

---

## ğŸ¯ è¨­è¨ˆç†å¿µï¼ˆDesign Philosophyï¼‰

### Base åªæ”¾ã€Œé€šç”¨èƒ½åŠ›ã€ï¼Œä¸æ”¾æ¥­å‹™é‚è¼¯

æœ¬å°ˆæ¡ˆåˆ»æ„ **ä¸åŒ…å«ä»»ä½•ç‰¹å®šæ¥­å‹™æµç¨‹**ï¼ˆä¾‹å¦‚å¯¦éš›è¡¨å–®ã€å ±è¡¨ã€ç³»çµ±åç¨±ç­‰ï¼‰ã€‚

åŸå‰‡ï¼š

- Base = èƒ½åŠ›ï¼ˆCapabilityï¼‰
- Feature = æ¥­å‹™ï¼ˆBusinessï¼‰

---

### Standalone First

- æ¡ç”¨ **Angular Standalone Components**
- ä¸ä½¿ç”¨ NgModule
- æ¶æ§‹æ›´ç›´è§€ã€æ‹†åˆ†æ›´å®¹æ˜“ã€å‡ç´šæˆæœ¬æ›´ä½

---

### æ˜ç¢ºåˆ†å±¤ï¼Œé¿å…è·è²¬æ··äº‚

- å…¨åŸŸèƒ½åŠ›ã€å…±ç”¨å…ƒä»¶ã€åŠŸèƒ½æ¨¡çµ„ **åš´æ ¼åˆ†é›¢**
- ä¸å…è¨± feature åå‘ä¾è³´ core

---

## ğŸ§± å°ˆæ¡ˆæ¶æ§‹ï¼ˆProject Structureï¼‰

```text
src/app/
â”œâ”€ core/                      # å…¨åŸŸå”¯ä¸€ï¼ˆSingletonï¼‰èƒ½åŠ›
â”‚  â”œâ”€ config/                 # App / Runtime è¨­å®š
â”‚  â”œâ”€ guards/                 # Route Guards
â”‚  â”œâ”€ interceptors/           # HTTP Interceptors
â”‚  â”œâ”€ http/                   # åŸºç¤ API å°è£
â”‚  â”œâ”€ services/               # Auth / Alert / Global services
â”‚  â””â”€ store/                  # Signal-based Global State (Entity Store)
â”‚
â”œâ”€ shared/                    # ç´”å…±ç”¨ï¼ˆç„¡æ¥­å‹™ï¼‰
â”‚  â”œâ”€ components/             # å…±ç”¨ UI å…ƒä»¶
â”‚  â”œâ”€ models/                 # å…±ç”¨ Model / DTO
â”‚  â”œâ”€ utils/                  # å·¥å…·å‡½å¼
â”‚  â””â”€ constants/              # å¸¸æ•¸å®šç¾©
â”‚
â”œâ”€ features/                  # å¯é¸åŠŸèƒ½æ¨¡çµ„ï¼ˆæ¥­å‹™å°å‘ï¼‰
â”‚  â”œâ”€ pdf/                    # PDF åŠŸèƒ½ï¼ˆå¯é¸ï¼‰
â”‚  â””â”€ excel/                  # Excel åŠŸèƒ½ï¼ˆå¯é¸ï¼‰
â”‚
â”œâ”€ pages/                     # å¯¦éš›é é¢ï¼ˆlogin / forgot / etcï¼‰
â”‚
â”œâ”€ app.component.ts
â”œâ”€ app.config.ts
â””â”€ app.routes.ts
```

## ğŸ§© åˆ†å±¤èªªæ˜èˆ‡æ”¾ç½®åŸå‰‡

### `core/`ï¼ˆå…¨ç«™å”¯ä¸€ï¼‰

- **åªèƒ½æœ‰ä¸€ä»½**
- å…¨ç«™éƒ½å¯èƒ½ä½¿ç”¨
- èˆ‡æ¥­å‹™ç„¡é—œ

**åŒ…å«å…§å®¹ï¼š**

- Auth / JWT
- HTTP Interceptor
- Global Alert / Error handling
- Global Signal Entity Storeï¼ˆå¦‚ Sessionã€System Configï¼‰

> â— **é™åˆ¶**
>
> - feature **ä¸å¯ä¾è³´å…¶ä»– feature**
> - shared **ä¸å¯ä¾è³´ core**

---

### `shared/`ï¼ˆç´”å…±ç”¨ï¼‰

- ä¸çŸ¥é“ã€Œç›®å‰æ˜¯ä»€éº¼ç³»çµ±ã€
- ä¸çŸ¥é“ã€Œç¾åœ¨åœ¨å“ªå€‹é é¢ã€
- ä¸å«ä»»ä½•æ¥­å‹™èªæ„

**åŒ…å«å…§å®¹ï¼š**

- å…±ç”¨ UI å…ƒä»¶
- å…±ç”¨ validator / utils
- å…±ç”¨ model / type

---

### `features/`ï¼ˆå¯é¸åŠŸèƒ½ï¼‰

- ä¸€å€‹ feature = ä¸€å€‹è‡ªçµ¦è‡ªè¶³çš„åŠŸèƒ½æ¨¡çµ„
- å¯æ•´åŒ…å•Ÿç”¨ / ä¸å•Ÿç”¨
- èˆ‡å…¶ä»– feature ä½è€¦åˆ

**ä¸€å€‹ feature å…§å¯ä»¥åŒ…å«ï¼š**

- stateï¼ˆSignal Storeï¼‰
- data-accessï¼ˆHTTP APIï¼‰
- models
- pages / components

---

### `pages/`

- çœŸæ­£æœƒå‡ºç¾åœ¨ Router ä¸­çš„é é¢
- Base åƒ…æä¾› **æœ€å°å¯ç”¨é é¢**ï¼ˆä¾‹å¦‚ loginï¼‰
- å¯¦éš›æ¥­å‹™ç³»çµ±å¯è‡ªç”±æ“´å……

## âš™ï¸ è¨­å®šèˆ‡å¯èª¿æ•´é …ç›®

### Angular ç‰ˆæœ¬

- Angular Majorï¼š**19ï¼ˆXIX ä¸–ä»£ï¼‰**
- å¯¦éš›ä½¿ç”¨ç‰ˆæœ¬è«‹ä»¥ `package.json` ç‚ºæº–

> å°ˆæ¡ˆåç¨±ä¸­çš„ `xix` åƒ…ä»£è¡¨ä¸–ä»£è­˜åˆ¥ï¼Œ  
> ä¸ä»£è¡¨ç²¾ç¢ºç‰ˆæœ¬è™Ÿã€‚

---

### UI ç­–ç•¥

- **Bootstrap-first**
- Angular Material ç‚º **å¯é¸**
- ä¸å¼·åˆ¶æ··ç”¨ï¼Œé¿å… UI èˆ‡å…ƒä»¶åº«ç¶æ­»

---

### å¯é¸åŠŸèƒ½ï¼ˆOptional Featuresï¼‰

| åŠŸèƒ½             | èªªæ˜              | æ˜¯å¦é è¨­ |
| ---------------- | ----------------- | -------- |
| Bootstrap        | æ’ç‰ˆåŸºç¤          | âœ…       |
| Angular Material | è¡¨å–®å…ƒä»¶          | â›” å¯é¸  |
| PDFï¼ˆpdfmakeï¼‰   | PDF è¼¸å‡º          | â›” å¯é¸  |
| Excelï¼ˆexceljsï¼‰ | Excel åŒ¯å…¥ / åŒ¯å‡º | â›” å¯é¸  |
| Wizard Skeleton  | å¤šæ­¥é©Ÿæµç¨‹éª¨æ¶    | â›” å¯é¸  |

---

## ğŸ“¦ æ‰“åŒ…èˆ‡éƒ¨ç½²ï¼ˆBuild & Deployï¼‰

### é–‹ç™¼æ¨¡å¼ï¼ˆæœ¬æ©Ÿï¼‰

```bash
npm start
```

## ğŸ§© æ ¸å¿ƒè¨­å®šèªªæ˜ï¼ˆå¿…çœ‹ï¼‰

æœ¬å°ˆæ¡ˆæœ‰ **ä¸‰å€‹ä¸€å®šè¦ç†è§£ã€è€Œä¸”åœ¨æ–°å°ˆæ¡ˆæ™‚æœƒèª¿æ•´çš„è¨­å®šå€¼**ï¼š

| åç¨±       | é¡å‹            | æ˜¯å¦éœ€è¦æ”¹  | èªªæ˜                                  |
| ---------- | --------------- | ----------- | ------------------------------------- |
| `APP_NAME` | build-time      | âœ… é€šå¸¸æœƒæ”¹ | Angular å°ˆæ¡ˆåç¨±ï¼ˆ`dist/<APP_NAME>`ï¼‰ |
| `SUB_URL`  | build + runtime | âœ… ä¸€å®šæœƒæ”¹ | å°å¤–éƒ¨ç½²çš„å­è·¯å¾‘ï¼ˆURL Pathï¼‰          |
| `API_URL`  | runtime         | âœ… ä¸€å®šæœƒæ”¹ | å¾Œç«¯ API ä½ç½®                         |

---

## 1ï¸âƒ£ APP_NAMEï¼ˆAngular å°ˆæ¡ˆåç¨±ï¼‰

### ç”¨é€”

- å°æ‡‰ Angular build çš„è¼¸å‡ºè³‡æ–™å¤¾
- ä¾†è‡ª `angular.json` çš„ project name

### å½±éŸ¿ç¯„åœ

- `dist/<APP_NAME>/browser`
- Docker build æ™‚æŠ“å– build ç”¢ç‰©

### ç¯„ä¾‹

```yaml
APP_NAME: ng-app-base-xix
```

## 2ï¸âƒ£ SUB_URLï¼ˆéƒ¨ç½²å­è·¯å¾‘ï¼Œæœ€é‡è¦ï¼‰

### ç”¨é€”

`SUB_URL` æ˜¯æœ¬å°ˆæ¡ˆæœ€é—œéµçš„éƒ¨ç½²è¨­å®šï¼ŒåŒæ™‚å½±éŸ¿å¤šå€‹å±¤é¢ï¼š

- å°å¤–æœå‹™çš„ **URL Path**
- Angular çš„ `base-href`
- Nginx çš„ `location` æ¯”å°è¦å‰‡
- å®¹å™¨å…§ **å¯¦éš›éœæ…‹æª”æ¡ˆæ”¾ç½®ä½ç½®**

> æ›å¥è©±èªªï¼š  
> **SUB_URL = å°ˆæ¡ˆå¯¦éš›éƒ¨ç½²çš„ã€Œäº‹å¯¦è·¯å¾‘ã€**

---

### è¦å‰‡

- **åªå¡« path token**
- **ä¸è¦åŒ…å«ä»»ä½•æ–œç·š**

âœ… æ­£ç¢ºï¼š

```text
ng-base-xix
```

å¯¦éš›æ•ˆæœï¼š

å°å¤–ç¶²å€ï¼š

```text
http://host/ng-base-xix/
```

å®¹å™¨å…§æª”æ¡ˆä½ç½®ï¼š

```text
/usr/share/nginx/html/ng-base-xix/
```

## ğŸ³ docker-compose è¨­å®šï¼ˆå¿…æ”¹é …ç›®ï¼‰

### docker-compose.yml

```yaml
version: "3.9"

services:
  frontend:
    image: ng-app-base-xix
    container_name: ng-app-base-xix
    build:
      context: .
      args:
        # Angular å°ˆæ¡ˆåç¨±ï¼ˆdist/<APP_NAME>ï¼‰
        APP_NAME: ng-app-base-xix

        # å°å¤–å­è·¯å¾‘ï¼ˆä¸è¦åŠ æ–œç·šï¼‰
        SUB_URL: ng-base-xix
    ports:
      - "31006:80"
    environment:
      # runtime API è¨­å®šï¼ˆæœƒç”¢ç”Ÿ env.jsï¼‰
      API_URL: "https://api.example.com"
    restart: unless-stopped
```

## ğŸ³ ç”Ÿç”¢éƒ¨ç½²ï¼ˆæ­£å¼ç’°å¢ƒï¼‰

> æœ¬å°ˆæ¡ˆ **ä¸ç›´æ¥ä½¿ç”¨ `ng build` ä½œç‚ºæœ€çµ‚éƒ¨ç½²æ–¹å¼**ã€‚
>
> æ­£å¼ç’°å¢ƒä¸€å¾‹ä»¥ **Docker / docker-compose** ä½œç‚ºå»ºç½®èˆ‡éƒ¨ç½²å…¥å£ã€‚

---

### éƒ¨ç½²æµç¨‹ç¸½è¦½

æ­£å¼ç’°å¢ƒå»ºè­°æµç¨‹å¦‚ä¸‹ï¼š

1. ä½¿ç”¨ **Docker** å»ºç«‹æ‡‰ç”¨ç¨‹å¼æ˜ åƒï¼ˆImageï¼‰
2. ç”± **docker-compose**ï¼ˆæˆ– k8sï¼‰è² è²¬æœå‹™å•Ÿå‹•èˆ‡ç®¡ç†
3. **Angular build åƒ…åœ¨å®¹å™¨å…§åŸ·è¡Œ**
4. ç”± **Nginx** æä¾›ç·¨è­¯å¾Œçš„éœæ…‹æª”æ¡ˆï¼ˆSPAï¼‰

---

### æ­£å¼éƒ¨ç½²æŒ‡ä»¤ï¼ˆdocker-composeï¼‰

```bash
docker compose up -d
```

## ğŸŒ æ­£ç¢ºå­˜å–ç¶²å€

æœ¬å°ˆæ¡ˆæ¡ç”¨ **å­è·¯å¾‘ï¼ˆSub Pathï¼‰éƒ¨ç½²**ï¼Œè«‹å‹™å¿…åœ¨ç¶²å€æœ€å¾ŒåŠ ä¸Š `/`ã€‚

### âœ… æ­£ç¢º

```text
http://localhost:31006/ng-base-xix/
```
